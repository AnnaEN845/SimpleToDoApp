<%- include('partials/header') %>


    <div class="container-fluid d-flex ">
      <i class="fas fa-key fa-2x mt-2 me-3"></i>
      <h1>My Todo List</h1>  
      <div class=" d-flex ms-auto">
        <h2 id="userName" class="me-2 mt-1" value="userID-<%= userId %>"><%= userName %></h2>
        <a class="btn btn-white-medium btn-sm ms-auto mt-2 mb-3" href="/logout" role="button"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"/>
          <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"/>
        </svg> Logout</a>
      </div>  
    </div>

    <div class="container mt-2">
      <div class="container-fluid d-flex justify-content-center align-items-center">
        <div class="card medium-card p-1">
          <div class="card-body p-1">
            <h4 class="card-title text-center mb-1"> <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"/>
              <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"/>
              <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"/>
            </svg> New Todo</h4>
            <form action="/add-todo" method="POST">
              <div class="form-group mb-1">
                <label for="todotitle" class="mb-1">Title*</label>
                <input type="text" class="form-control form-control-sm" name="todotitle" placeholder="New todo title" required>
                <!-- <input type="text" name="todotitle" placeholder="New todo title" required> -->
              </div>
              <div class="form-group mb-1">
                <label for="description" class="mb-1">Description*</label>
                <!-- <input type="text" name="description" placeholder="Todo description" required> -->
                <input type="text" class="form-control form-control-sm" name="description" placeholder="Todo description" required>
              </div>
              <div class="form-row d-flex">
                <div class="col">
                  <label for="dueDate" class="mb-1">Due Date*</label>
                  <input type="date" class="form-control form-control-sm"  name="dueDate">
                </div>
                <div class="col">
                  <label for="priority" class="mb-1">Priority*</label>
                  <select class="form-select form-select-sm" name="priority">
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                  </select>
                </div>
                <div class="col">
                  <label for="category" class="mb-1">Category*</label>
                  <select class="form-select form-select-sm" name="category">
                    <option value="personal">Personal</option>
                    <option value="work">Work</option>
                    <option value="shopping">Shopping</option>
                  </select>
                </div>
              </div>
              <div class="d-flex justify-content-center mt-2">
                <button class="btn btn-sm btn-blue-small btn-block mt-1" type="submit"> <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-building-add" viewBox="0 0 16 16">
                  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0"/>
                  <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6.5a.5.5 0 0 1-1 0V1H3v14h3v-2.5a.5.5 0 0 1 .5-.5H8v4H3a1 1 0 0 1-1-1z"/>
                  <path d="M4.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                </svg> Add Todo</button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>


    <div class="container-fluid pt-4 pb-4">
      <div class="row">
        <!-- Work Todos -->
        <div class="col">
          <div class="accordion" id="workAccordion">
            <h2 class="text-center">Work <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"/>
              <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"/>
              <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"/>
            </svg> </h2>
            <% workTodos.forEach(function(todo, index) { %>
              <div class="accordion-item text-blue">
                <h6 class="accordion-header d-flex align-items-center justify-content-between" id="headingWork<%= index %>">
                  <div class="d-flex align-items-center w-100">
                    <form action="/update-todo" method="POST" style="display: inline;">
                      <input type="hidden" name="todo_id" value="<%= todo.todo_id %>">
                      <input class="ms-3 mt-2 mb-3" type="checkbox" name="completed" onChange="this.form.submit()" <%= todo.completed ? 'checked' : '' %>>
                    </form>
                    <p class="ms-3 mt-3 mb-3 flex-grow-1"><%= todo.title %></p>
                    <button class="accordion-button collapsed ms-auto fixed-size-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseWork<%= index %>" aria-expanded="false" aria-controls="collapseWork<%= index %>">
                    
                    </button>
                  </div>
                  <form class="mx-2 mt-2 mb-3" action="/delete-todo" method="POST" style="display: inline;">
                    <input type="hidden" name="todo_id" value="<%= todo.todo_id %>">
                    <button type="submit" class="btn btn-danger btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                      <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                      <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                    </svg></button>
                  </form>
                </h6>
                <div id="collapseWork<%= index %>" class="accordion-collapse collapse" aria-labelledby="headingWork<%= index %>" data-bs-parent="#workAccordion">
                  <div class="accordion-body text-size-accordion-body">
                   <p> <%= todo.description %></p>
                    <hr>
                    <p>Due: <%= todo.due_date %></p>
                    <p>Priority: <%= todo.priority %></p>
                    <p>Category: <%= todo.category %></p>
                  </div>
                </div>
              </div>
            <% }); %>
          </div>
        </div>
    
        <!-- Personal Todos -->
        <div class="col">
          <div class="accordion" id="personalAccordion">
            <h2 class="text-center">Personal <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"/>
              <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"/>
              <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"/>
            </svg></h2>
            <% personalTodos.forEach(function(todo, index) { %>
              <div class="accordion-item text-blue">
                <h6 class="accordion-header d-flex align-items-center justify-content-between" id="headingPersonal<%= index %>">
                  <div class="d-flex align-items-center w-100">
                    <form action="/update-todo" method="POST" style="display: inline;">
                      <input type="hidden" name="todo_id" value="<%= todo.todo_id %>">
                      <input class="ms-3 mt-2 mb-3" type="checkbox" name="completed" onChange="this.form.submit()" <%= todo.completed ? 'checked' : '' %>>
                    </form>
                    <p class="ms-3 mt-3 mb-3 flex-grow-1"><%= todo.title %></p>
                    <button class="accordion-button collapsed ms-auto fixed-size-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePersonal<%= index %>" aria-expanded="false" aria-controls="collapsePersonal<%= index %>">
                    
                    </button>
                  </div>
                  <form class="mx-2 mt-2 mb-3" action="/delete-todo" method="POST" style="display: inline;">
                    <input type="hidden" name="todo_id" value="<%= todo.todo_id %>">
                    <button type="submit" class="btn btn-danger btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                      <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                      <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                    </svg></button>
                  </form>
                </h6>
                <div id="collapsePersonal<%= index %>" class="accordion-collapse collapse" aria-labelledby="headingPersonal<%= index %>" data-bs-parent="#personalAccordion">
                  <div class="accordion-body text-size-accordion-body">
                    <p><%= todo.description %></p>
                    <hr>
                    <p>Due: <%= todo.due_date %></p>
                    <p>Priority: <%= todo.priority %></p>
                    <p>Category: <%= todo.category %></p>
                  </div>
                </div>
              </div>
            <% }); %>
          </div>
        </div>
    
        <!-- Shopping Todos -->

        <div class="col">
          <div class="accordion" id="shoppingAccordion">
            <h2 class="text-center">Shopping <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"/>
              <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"/>
              <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"/>
            </svg></h2>
            <% shoppingTodos.forEach(function(todo, index) { %>
              <div class="accordion-item text-blue">
                <h6 class="accordion-header d-flex align-items-center justify-content-between" id="headingShopping<%= index %>">
                  <div class="d-flex align-items-center w-100">
                    <form action="/update-todo" method="POST" style="display: inline;">
                      <input type="hidden" name="todo_id" value="<%= todo.todo_id %>">
                      <input class="ms-3 mt-2 mb-3" type="checkbox" name="completed" onChange="this.form.submit()" <%= todo.completed ? 'checked' : '' %>>
                    </form>
                    <p class="ms-3 mt-3 mb-3 flex-grow-1"><%= todo.title %></p>
                    <button class="accordion-button collapsed ms-auto fixed-size-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseShopping<%= index %>" aria-expanded="false" aria-controls="collapseShopping<%= index %>">
                    
                    </button>
                  </div>
                  <form class="mx-2 mt-2 mb-3" action="/delete-todo" method="POST" style="display: inline;">
                    <input type="hidden" name="todo_id" value="<%= todo.todo_id %>">
                    <button type="submit" class="btn btn-danger btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                      <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                      <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                    </svg></button>
                  </form>
                </h6>
                <div id="collapseShopping<%= index %>" class="accordion-collapse collapse" aria-labelledby="headingShopping<%= index %>" data-bs-parent="#shoppingAccordion">
                  <div class="accordion-body text-size-accordion-body">
                    <p><%= todo.description %></p>
                    <hr>
                    <p>Due: <%= todo.due_date %></p>
                    <p>Priority: <%= todo.priority %></p>
                    <p>Category: <%= todo.category %></p>
                  </div>
                </div>
              </div>
            <% }); %>
          </div>
        </div>


    


  </div> 
  <%- include('partials/footer') %>